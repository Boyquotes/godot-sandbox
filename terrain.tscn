[gd_scene load_steps=12 format=3 uid="uid://dvxywync4hi4l"]

[ext_resource type="Texture2D" uid="uid://dcp1gubemlbed" path="res://assets/tilesets/layout/tileset.png" id="1_i2hb2"]
[ext_resource type="Texture2D" uid="uid://0sc0it1m7spt" path="res://assets/tilesets/render/tileset.png" id="2_yko38"]
[ext_resource type="Texture2D" uid="uid://jg6kremroyab" path="res://assets/tilesets/debug.png" id="5_uvkj0"]
[ext_resource type="Script" path="res://TileMap.gd" id="6_q0h03"]

[sub_resource type="GDScript" id="GDScript_4hq80"]
script/source = "extends Node2D


func layout_cell_to_render_cell(layer: int, ortho: Vector2i) -> Vector2i:
	# We are treating higher TileMap layers as higher in elevation, which means
	# they should be drawn above the bottom tiles in 3D.
	#
	# This assumes the tile_layout property of the TileSet is DIAMOND_DOWN.
	return Vector2i(ortho.x - layer, ortho.y - layer)


func _ready():
	$Layout.visible = false
	
	for i in range($Layout.get_layers_count()):
		$Render.add_layer(i)
		$Render.set_layer_y_sort_enabled(i, true)
		$Render.set_layer_z_index(i, i)

		for c in $Layout.get_used_cells(i):
			var atlas = $Layout.get_cell_atlas_coords(i, c)
			$Render.set_cell(i, layout_cell_to_render_cell(i, c), $Layout.get_cell_source_id(i, c), atlas)
"

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_oct83"]
texture = ExtResource("1_i2hb2")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_1/angular_velocity = 0.0
0:0/0/physics_layer_1/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
1:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_1/angular_velocity = 0.0
1:0/0/physics_layer_1/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
2:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_1/angular_velocity = 0.0
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, -16, 16, 16, 16, 16, -16)
3:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_1/angular_velocity = 0.0

[sub_resource type="TileSet" id="TileSet_i1n0u"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
physics_layer_1/collision_layer = 2
physics_layer_1/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_oct83")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_loq0h"]
texture = ExtResource("2_yko38")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0

[sub_resource type="TileSet" id="TileSet_pcle8"]
tile_shape = 1
tile_layout = 5
tile_size = Vector2i(32, 16)
sources/0 = SubResource("TileSetAtlasSource_loq0h")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_b3ces"]
texture = ExtResource("5_uvkj0")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_86wo1"]
tile_shape = 1
tile_layout = 5
tile_size = Vector2i(32, 16)
sources/0 = SubResource("TileSetAtlasSource_b3ces")

[node name="Terrain" type="Node2D"]
y_sort_enabled = true
script = SubResource("GDScript_4hq80")

[node name="Layout" type="TileMap" parent="."]
visible = false
tile_set = SubResource("TileSet_i1n0u")
format = 2
layer_0/tile_data = PackedInt32Array(0, 65536, 0, 65536, 65536, 0, 131072, 65536, 0, 196608, 65536, 0, 1, 65536, 0, 2, 65536, 0, 3, 65536, 0, 4, 65536, 0, 262144, 65536, 0, 327680, 65536, 0, 393216, 65536, 0, 458752, 65536, 0, 524288, 65536, 0, 589824, 65536, 0, 5, 65536, 0, 6, 65536, 0, 7, 65536, 0, 8, 65536, 0, 9, 65536, 0, 65545, 65536, 0, 131081, 65536, 0, 196617, 65536, 0, 262153, 65536, 0, 327689, 65536, 0, 393225, 65536, 0, 458761, 65536, 0, 524297, 65536, 0, 589833, 65536, 0, 589832, 65536, 0, 589831, 65536, 0, 589830, 65536, 0, 589829, 65536, 0, 589828, 65536, 0, 589827, 65536, 0, 589826, 65536, 0, 589825, 65536, 0, 65537, 0, 0, 65538, 0, 0, 65539, 0, 0, 131075, 0, 0, 196611, 0, 0, 196610, 0, 0, 131074, 0, 0, 131073, 0, 0, 196609, 0, 0, 262145, 0, 0, 262147, 0, 0, 262146, 0, 0, 327687, 131072, 0, 262151, 131072, 0, 196615, 131072, 0, 131079, 131072, 0, 65543, 131072, 0, 65542, 131072, 0, 65541, 131072, 0, 65540, 131072, 0, 131076, 131072, 0, 196612, 131072, 0, 262148, 131072, 0, 327684, 131072, 0, 327683, 131072, 0, 327682, 131072, 0, 327681, 131072, 0, 393217, 131072, 0, 458753, 131072, 0, 524289, 131072, 0, 524290, 131072, 0, 458754, 131072, 0, 393218, 131072, 0, 393219, 131072, 0, 458755, 131072, 0, 524291, 131072, 0, 524292, 131072, 0, 458756, 131072, 0, 393220, 131072, 0, 393221, 131072, 0, 327685, 131072, 0, 262149, 131072, 0, 196613, 131072, 0, 131077, 131072, 0, 131078, 131072, 0, 196614, 131072, 0, 262150, 131072, 0, 327686, 131072, 0, 393222, 131072, 0, 458758, 131072, 0, 458757, 131072, 0, 524293, 131072, 0, 524294, 131072, 0, 524295, 131072, 0, 458759, 131072, 0, 393223, 131072, 0, 393224, 131072, 0, 327688, 131072, 0, 262152, 131072, 0, 196616, 131072, 0, 131080, 131072, 0, 65544, 131072, 0, 458760, 131072, 0, 524296, 131072, 0)
layer_1/name = ""
layer_1/enabled = true
layer_1/modulate = Color(1, 1, 1, 1)
layer_1/y_sort_enabled = false
layer_1/y_sort_origin = 0
layer_1/z_index = 0
layer_1/tile_data = PackedInt32Array()
layer_2/name = ""
layer_2/enabled = true
layer_2/modulate = Color(1, 1, 1, 1)
layer_2/y_sort_enabled = false
layer_2/y_sort_origin = 0
layer_2/z_index = 0
layer_2/tile_data = PackedInt32Array()

[node name="Render" type="TileMap" parent="."]
y_sort_enabled = true
tile_set = SubResource("TileSet_pcle8")
format = 2

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_86wo1")
format = 2
script = ExtResource("6_q0h03")
